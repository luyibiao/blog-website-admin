(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["banner-edit"],{"19aa":function(t,e,r){},"2eeb":function(t,e,r){"use strict";var i=r("1c8b"),s=r("5dfd").map,o=r("1ea7"),l=r("ff9c"),n=o("map"),a=l("map");i({target:"Array",proto:!0,forced:!n||!a},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"6f20":function(t,e,r){},8830:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"session-banner-edit"},[r("el-form",{attrs:{"label-width":"80px",model:t.forms}},[r("el-form-item",{attrs:{label:"上传图片"}},[r("b-upload",{attrs:{fileList:t.fileList},on:{"on-remove":t.uploadRemove,"on-success":t.uploadSuccess}})],1),r("el-form-item",{attrs:{label:"类型"}},[r("el-radio-group",{model:{value:t.forms.type,callback:function(e){t.$set(t.forms,"type",e)},expression:"forms.type"}},[r("el-radio",{attrs:{label:1}},[t._v("本地跳转")]),r("el-radio",{attrs:{label:2}},[t._v("外链")])],1)],1),1==t.forms.type?[r("el-form-item",{attrs:{label:""}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onSelectArticle}},[t._v("选择文章")]),t.forms.article_id?r("span",{staticStyle:{"margin-left":"10px",color:"#909399"}},[t._v("已选择"+t._s(t.forms.article_title))]):t._e()],1)]:2==t.forms.type?[r("el-form-item",{attrs:{label:"填写链接"}},[r("el-input",{staticStyle:{width:"330px"},model:{value:t.forms.url,callback:function(e){t.$set(t.forms,"url",e)},expression:"forms.url"}})],1)]:t._e()],2),r("div",{staticClass:"session-banner-edit_btn"},[r("el-button",{attrs:{type:"success"},on:{click:t.save}},[t._v("保存")])],1)],1)},s=[],o=(r("2eeb"),r("fe8a"),r("e793")),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ui-popup",{staticClass:"components-lineArticle",attrs:{title:"选择文章",width:"1000px",top:"20px","highlight-current-row":""},on:{onSubmit:t.onSubmit,onCancel:t.onCancel}},[r("table-layout",{scopedSlots:t._u([{key:"form",fn:function(){return[r("el-form",{attrs:{model:t.forms,inline:"","label-position":"left"}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{staticStyle:{width:"220px"},model:{value:t.forms.title,callback:function(e){t.$set(t.forms,"title",e)},expression:"forms.title"}})],1),r("el-form-item",{attrs:{label:"作者"}},[r("el-input",{staticStyle:{width:"150px"},model:{value:t.forms.author,callback:function(e){t.$set(t.forms,"author",e)},expression:"forms.author"}})],1),r("el-form-item",{attrs:{label:"文章类型"}},[r("el-select",{staticStyle:{width:"120px"},model:{value:t.forms.type,callback:function(e){t.$set(t.forms,"type",e)},expression:"forms.type"}},[r("el-option",{attrs:{label:"全部",value:""}}),t._l(t.getArticleType,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.code}})}))],2)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("搜索")])],1)],1)]},proxy:!0}])},[[r("b-table",{attrs:{handleCurrentChanges:t.handleCurrentChange,action:"queryArticle",hasPagination:"",forms:t.forms,refresh:t.refresh,columns:t.columns}})]],2)],1)},n=[],a=r("9f3a"),c={name:"b-lineArticle",data:function(){var t=this,e=this.$createElement;return{forms:{title:"",type:"",status:"LINE"},refresh:!1,loading:!1,columns:[{label:"文章标题",prop:"title",width:"180px"},{label:"文章作者",prop:"author"},{label:"观看和评论数",render:function(t){return e("div",[e("p",["观看数： ",t.row.watch_num]),e("p",["评论数： ",t.row.comment_num])])},width:"130px"},{label:"文章logo",width:"150px",render:function(t){return e("img",{attrs:{src:t.row.logo},class:"article-components_logos"})}},{label:"标签",width:"220px",render:function(t){var r=JSON.parse(t.row.label||"[]"),i=r.map((function(t){return e("el-tag",{class:"article-components_label"},[t.label])}));return e("div",[i])}},{label:"文章类型",render:function(r){return e("span",[t.$vueFilters.formatStatus(r.row.type,t.getArticleType)])}}],row:{}}},computed:Object(o["a"])({},Object(a["b"])(["getArticleType"])),methods:{onSearch:function(){this.refresh=!this.refresh},onSubmit:function(){},onCancel:function(){this.reject()},handleCurrentChange:function(t){this.resolve(t)}}},u=c,f=(r("fa95"),r("9ca4")),m=Object(f["a"])(u,l,n,!1,null,null,null),h=m.exports,p={data:function(){return{loading:!1,forms:{type:1,logoPath:"",logonName:"",url:"",imgUrl:"",article_id:"",article_title:""},fileList:[],row:{},id:""}},created:function(){this.id=this.$route.query.id,this.id&&this.getDetail()},methods:{init:function(t){var e=this;Object.keys(this.forms).map((function(r){t.hasOwnProperty(r)&&(e.forms[r]=t[r])})),this.selectArr=JSON.parse(this.forms.label||"[]"),this.fileList.push({url:t.imgUrl}),console.log(this.forms)},getDetail:function(){var t=this;this.loading=!0,this.$api.queryBannerDetail({id:this.id}).then((function(e){t.init(e),t.loading=!1})).catch((function(e){t.loading=!1}))},uploadSuccess:function(t){this.forms.logoPath=t.path,this.forms.logonName=t.fName},uploadRemove:function(){this.forms.imgUrl=""},onSelectArticle:function(){var t=this;this.$popup(h).then((function(e){t.forms.article_id=e.id,t.forms.article_title=e.title,t.row=e}))},save:function(){var t=this;if(this.forms.logoPath||this.forms.imgUrl)if(1!=this.forms.type||this.forms.article_id)if(2!=this.forms.type||this.forms.url){this.loading=!0,1==this.forms.type?this.forms.url="":(this.forms.article_id="",this.forms.article_title="");var e=this.id?"updatebanner":"addbnner",r=Object(o["a"])({},this.forms);this.id&&(r.id=this.id),this.$api[e](r).then((function(e){t.$message.success("保存成功"),t.$router.push("./banner")})).catch((function(e){t.loading=!1}))}else this.$message.error("外链不能为空");else this.$message.error("跳转文章不能为空");else this.$message.error("图片不能为空")}}},d=p,b=(r("b516"),Object(f["a"])(d,i,s,!1,null,null,null));e["default"]=b.exports},b516:function(t,e,r){"use strict";var i=r("19aa"),s=r.n(i);s.a},fa95:function(t,e,r){"use strict";var i=r("6f20"),s=r.n(i);s.a}}]);
//# sourceMappingURL=banner-edit.d00b8289.js.map